<html>
   <head>
      <meta http-equiv="Pragma" content="no-cache">
      <LINK href="stylemain.css" type="text/css" rel="stylesheet">
         <LINK href="colors.css" type="text/css" rel="stylesheet">
            <script language="javascript" src="util.js"></script>
            <script language="javascript">
<!-- hide

var buildvlm =  '<%ejGetOther(sysInfo, buildWanVlanMux)%>';
var numPrioLevels = '<%ejGet(glbQosPrioLevel)%>';

function frmLoad() {
   with ( document.forms[0] ) {
      showhide('divBuildVlanMux', buildvlm);
   }
}

function btnBack() {
   var code = 'location="dslptm.cmd"';
   eval(code);
}


function btnSave() {
   var loc = 'dslptm.cmd?action=add';
   var portId;

   with ( document.forms[0] ) {
      if (path0.checked == true && path1.checked == true) {
            portId = '4';
      }
      else if (path0.checked == true) {
            portId = '0';
      }
      else if (path1.checked == true) {
            portId = '1';
      }
      else {
         alert('At least one latency check box need be selected.');
         return;
      }	  	
      loc += '&portId=' + portId;

      if (priorityNorm.checked == false && priorityHigh.checked == false) {
         alert('At least one priority check box need be selected.');
         return;
      }	  	
      if (priorityNorm.checked == true)
         loc +='&ptmPriorityNorm=1';
      else
         loc +='&ptmPriorityNorm=0';
      if (priorityHigh.checked == true)
         loc +='&ptmPriorityHigh=1';
      else 
         loc +='&ptmPriorityHigh=0';

      if (connMode[0].checked == true)
         loc += '&connMode=0';
      else if (connMode[1]. checked == true)
         loc += '&connMode=1';
	  
      loc += '&enblQos=1';
      if (alg[0].checked == true)
         loc += '&alg=SP';
      else {
         if ( isNaN(parseInt(wght.value)) == true ) {
            alert('Weight Value "' + wght.value + '" is invalid.');
            return;
         }
         wghtval = parseInt(wght.value);
         if ( wghtval < 1 || wghtval > 63 ) {
            alert('Weight Value "' + wght.value + '" is out of range [1-63].');
            return;
         }
         loc += '&alg=WFQ&wght=' + wght.value;
         loc += '&prec=' + prec.value;
      }
   }
   loc += '&sessionKey=<%ejGetOther(sessionKey)%>';
   var code = 'location="' + loc + '"';
   eval(code);
}


// done hiding -->
</script>
   </head>
   <body onLoad='frmLoad()'>
      <blockquote>
         <form>
	     <center>
            <br>
            <strong>PTM  Configuration</strong><br>
            This screen allows you to configure a PTM connection.
            <br>
            <br>
            <table border="0" cellpadding="0" cellspacing="0">
           	 <td><strong>Select DSL Latency</strong></td><br>
                  <tr>
                     <td colspan="2"><input type='checkbox' name='path0' checked>&nbsp;Path0</td>
                  </tr>
                  <tr>
                     <td colspan="2"><input type='checkbox' name='path1'>&nbsp;Path1</td>
                  </tr>
            </table>
            <table border="0" cellpadding="0" cellspacing="0">
           	 <td><strong>Select PTM Priority</strong></td><br>
                  <tr>
                     <td colspan="2"><input type='checkbox' name='priorityNorm' checked>&nbsp;Normal Priority</td>
                  </tr>
                  <tr>
                     <td colspan="2"><input type='checkbox' name='priorityHigh'>&nbsp;High Priority (Preemption)</td>
                  </tr>
            </table>
            <div id="divBuildVlanMux">
            <br>
            <table border="0" cellpadding="0" cellspacing="0">
           	 <td><strong>Select Connection Mode</strong></td><br>
                  <tr>
                     <td colspan="2"><input type='radio' name='connMode' checked>&nbsp;Default Mode - Single service over one connection</td>
                  </tr>
                  <tr>
                     <td colspan="2"><input type='radio' name='connMode'>&nbsp;VLAN MUX Mode - Multiple Vlan service over one connection</td>
                  </tr>
            </table>
            </div>
            <div id='algorithm'>
               <table border="0" cellpadding="0" cellspacing="0">
                  <tr>
                     <td colspan="2" align="left">Select IP QoS Scheduler Algorithm</td><br>
                  </tr>
                  <tr>
                     <td colspan="2"><input type='radio' name='alg' checked>&nbsp;Strict Priority</td>
                  </tr>
                  <tr>
                     <td width='360'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Precedence of the default queue:</td>
                     <script language="javascript">
                     <!-- hide
                     document.write("<td>" + numPrioLevels + "&nbsp;(lowest)</td>");
                     // done hiding -->
                  	 </script>
                  </tr>
                  <tr>
                     <td colspan="2"><input type='radio' name='alg'>&nbsp;Weighted Fair Queuing</td>
                  </tr>
                  <tr>
                     <td width='360'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Weight Value of the default queue: [1-63]</td>
                     <td><input type='text' size='4' name='wght'></td>
                  </tr>
                  <tr>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MPAAL Group Precedence:</td>
                     <td><select name='prec' size="1">
                         <script language="javascript">
                         <!-- hide
						 for ( i = 1; i < numPrioLevels; i++ ) {
						    document.write("  <option value='" + i + "'>");
						    document.writeln(i);
						 }
						 document.write("  <option value='" + i + "'selected>");
						 document.writeln(i);
						 // done hiding -->
                     	 </script>
                     </select></td>
                  </tr>
               </table>
            </div>
            
            <br>
               <input type='button' onClick='btnBack()' value='Back'> <input type='button' onClick='btnSave()' value='Apply/Save'>
            </center>
         </form>
      </blockquote>
   </body>
</html>
