<html>
   <head>
      <meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
      <link rel="stylesheet" href='stylemain.css' type='text/css'>
         <link rel="stylesheet" href='colors.css' type='text/css'>
            <script language="javascript" src="util.js"></script>
            <script language="javascript">
<!-- hide
var enblRadvdaemon = '<%ejGetOther(enblRadvd, all)%>';
var enblDhcps = '<%ejGetOther(enblDhcp6s, all)%>';
var enblDhcpsStateful = '<%ejGet(enblDhcp6sStateful)%>';
var IntfIDStart = '<%ejGet(ipv6IntfIDStart)%>';
var IntfIDEnd = '<%ejGet(ipv6IntfIDEnd)%>';
var dhcp6Lease = '<%ejGet(dhcp6LeasedTime)%>';
var intfAddress6 = '<%ejGet(lanIntfAddr6)%>';

var enblMldSnp = '<%ejGetOther(sysInfo, enblMldSnp)%>';
var enblMldMode = '<%ejGetOther(sysInfo, enblMldMode)%>';



function hideMldSnpInfo(hide) {
   var status = 'visible';

   if ( hide == 1 )
      status = 'hidden';
   if (document.getElementById)  // DOM3 = IE5, NS6
      document.getElementById('mldSnpInfo').style.visibility = status;
   else {
      if (document.layers == false) // IE4
         document.all.mldSnpInfo.style.visibility = status;
   }
}

function hideDhcpInfo(hide) {
   var status = 'visible';

   if ( hide == 1 )
      status = 'hidden';
   if (document.getElementById)  // DOM3 = IE5, NS6
      document.getElementById('dhcpInfo').style.visibility = status;
   else {
      if (document.layers == false) // IE4
         document.all.dhcpInfo.style.visibility = status;
   }
}

function configStatelessDhcp6s() {
   with ( document.forms[0] ) {
      dhcpSrv6Type[1].checked = false;
      ipv6IntfIDStart.disabled = 1;
      ipv6IntfIDEnd.disabled = 1;
      ipv6IntfIDStart.value = IntfIDStart;
      ipv6IntfIDEnd.value = IntfIDEnd;
      dhcp6LeasedTime.disabled = 1;
   }
}

function configStatefulDhcp6s() {
   with ( document.forms[0] ) {
      dhcpSrv6Type[1].checked = true;
      ipv6IntfIDStart.disabled = 0;
      ipv6IntfIDEnd.disabled = 0;
      dhcp6LeasedTime.disabled = 0;
      ipv6IntfIDStart.value = IntfIDStart;
      ipv6IntfIDEnd.value = IntfIDEnd;
      dhcp6LeasedTime.value = dhcp6Lease;
   }
}

function typeClick() {
   with ( document.forms[0] ) {
      if ( dhcpSrv6Type[0].checked == true ) {
         configStatelessDhcp6s();
      } else {
         configStatefulDhcp6s();
      }
   }
}

function MldClick() {
}

function radvdClick(cb) {
}

function dhcp6sClick(cb) {
   if (cb.checked == true)
      hideStatefulInfo(0)
   else
      hideStatefulInfo(1);
}

function hideMldSnpInfo(hide) {
   var status = 'visible';

   if ( hide == 1 )
      status = 'hidden';
   if (document.getElementById)  // DOM3 = IE5, NS6
      document.getElementById('mldSnpInfo').style.visibility = status;
   else {
      if (document.layers == false) // IE4
         document.all.mldSnpInfo.style.visibility = status;
   }
}

function hideStatefulInfo(hide) {
   var status = 'visible';

   if ( hide == 1 )
      status = 'hidden';
   if (document.getElementById)  // DOM3 = IE5, NS6
      document.getElementById('statefulInfo').style.visibility = status;
   else {
      if (document.layers == false) // IE4
         document.all.statefulInfo.style.visibility = status;
   }
}

function mldClick(cb) {
   if (cb.checked == true)
      hideMldSnpInfo(0)
   else
      hideMldSnpInfo(1);
}

function btnApply() {
   var loc = 'ipv6lancfg.cmd?action=savapply';

   with ( document.forms[0] ) {
      if (enableRadvd.checked == true)
         loc += '&enblRadvd=1';
      else
         loc += '&enblRadvd=0';

      if (enableDhcp6s.checked == true) {
         loc += '&enblDhcp6s=1';
      }
      else {
         loc += '&enblDhcp6s=0';
      }

      if (dhcpSrv6Type[0].checked == true)
      {
         loc += '&enblDhcp6sStateful=0';
      }
      else
      {
         loc += '&enblDhcp6sStateful=1';
      }

      loc += '&ipv6IntfIDStart=' + ipv6IntfIDStart.value;
      loc += '&ipv6IntfIDEnd=' + ipv6IntfIDEnd.value;
      loc += '&dhcp6LeasedTime=' + dhcp6LeasedTime.value;
      loc += '&lanIntfAddr6=' + intfAddr.value;

     if ( chkMldSnp.checked == true )
        loc += '&enblMldSnp=1';
     else
        loc += '&enblMldSnp=0';

     if ( mldMode[1].checked == true )
        loc += '&enblMldMode=1';
     else
        loc += '&enblMldMode=0';

      
   }
   loc += '&sessionKey=<%ejGetOther(sessionKey)%>';
   var code = 'location="' + loc + '"';
   eval(code);
}


function frmLoad() {

   with ( document.forms[0] ) {
      enableRadvd.checked = false;

      if (enblRadvdaemon == '1') {
         enableRadvd.checked = true;
      }

      intfAddr.value = intfAddress6;
      enableDhcp6s.checked = false;
      
      if (enblDhcps == '1') {
         enableDhcp6s.checked = true;
         hideStatefulInfo(0);

         if ( enblDhcpsStateful == '1' ) {
            configStatefulDhcp6s(1);
         } else {
            dhcpSrv6Type[0].checked = true;
            configStatelessDhcp6s();
         }

      } else {
         enableDhcp6s.checked = false;
         hideStatefulInfo(1);
      }

      if ( enblMldSnp == '1' ) {
        chkMldSnp.checked = true;
        hideMldSnpInfo(0);
      } else {
        chkMldSnp.checked = false;
        hideMldSnpInfo(1);
      }

      if ( enblMldMode == '1' ) {
    	mldMode[0].checked = false;
    	mldMode[1].checked = true;
      } else {
        mldMode[0].checked = true;
        mldMode[1].checked = false;
      }
   }
}

// done hiding -->
</script>
   </head>
   <body onLoad='frmLoad()'>
      <blockquote>
         <form>
            <P>
               <b>IPv6 LAN Auto Configuration</b><br>
               Note: Stateful DHCPv6 is supported based on the assumption of prefix length less than 64. 
               Interface ID does NOT support ZERO COMPRESSION "::". Please enter the complete information.
               For exampe: Please enter "0:0:0:2" instead of "::2".<br>
            </P>
            <table border='0' cellpadding='0' cellspacing='0'>
               <tr>
                  <b>Static LAN IPv6 Address Configuration</b>
               </tr>
               <tr>
                  <td>Interface Address (prefix length is required):</td>
                  <td><input type='text' name='intfAddr'></td>
               </tr>
            </table><br>

            <tr>
               <b>IPv6 LAN Applications</b>
            </tr>
            <table border='0' cellpadding='0' cellspacing='0'>
               <tr>
                  <td valign='center' align='middle' colspan='2' width='30' height='30'>
                     <input type='checkbox' name='enableDhcp6s' onClick='dhcp6sClick(this)'></td>
                  <td colspan='2'>Enable DHCPv6 Server</td>
               </tr>
            </table>

            <div id='statefulInfo'>
            <table border="0" cellpadding="0" cellspacing="0">
                  <tr>
                     <td colspan="2"><input type='radio' name='dhcpSrv6Type' onClick='typeClick()'>&nbsp;&nbsp;Stateless</td>
                  </tr>
                  <tr>
                     <td colspan="2"><input type='radio' name='dhcpSrv6Type' onClick='typeClick()'>&nbsp;&nbsp;Stateful</td>
                  </tr>
                  <tr>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Start interface ID:</td>
                     <td><input type='text' name='ipv6IntfIDStart'></td>
                  </tr>
                  <tr>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End interface ID:</td>
                     <td><input type='text' name='ipv6IntfIDEnd'></td>
                  </tr>
                  <tr>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Leased Time (hour):</td>
                     <td><input type='text' name='dhcp6LeasedTime'></td>
                  </tr>
            </table>
            <br>
            </div>

            <table border='0' cellpadding='0' cellspacing='0'>
               <tr>
                  <td valign='center' align='middle' colspan='2' width='30' height='30'>
                     <input type='checkbox' name='enableRadvd' onClick='radvdClick(this)'></td>
                  <td colspan='2'>Enable RADVD</td>
               </tr>
            </table>
           
            <table border="0" cellpadding="0" cellspacing="0">
               <tr>
                  <td><input type='checkbox' name='chkMldSnp' onClick='mldClick(this)'>&nbsp;&nbsp;Enable MLD Snooping</td>
               </tr>
            </table>
            <br>
               <tr>
                  <tr>
            <div id='mldSnpInfo'>
            <table border="0" cellpadding="0" cellspacing="0">
                     <td colspan="2"><input type='radio' name='mldMode'>&nbsp;&nbsp;Standard Mode</td>
                  </tr>
                  <tr>
                     <td colspan="2"><input type='radio' name='mldMode'>&nbsp;&nbsp;Blocking Mode</td>
                  </tr>
               </tr>
            </table>
            <br>
            </div>
            <center>
               <input type='button' onClick='btnApply()' value='Save/Apply'>
            </center>
         </form>
      </blockquote>
   </body>
</html>
