<html>
<head>
<meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
<link rel=stylesheet href='stylemain.css' type='text/css'>
<link rel=stylesheet href='colors.css' type='text/css'>

<script language="javascript" src="util.js"></script>
<script language="javascript">
<!-- hide

var chipId = <%ejGetOther(sysInfo, chipId)%>


function frmLoad() {

   var loc;


   if (loc) {
      var code = 'location="' + loc + '"';
      eval(code);
   } else {
      with ( document.forms[0] ) {
         var pwrmngt = '';
         pwrmngt = '<%ejGetOther(pwrmngt)%>';
      }
   }
}

function btnApply() {
   var loc = 'pwrmngt.cmd?';

   with ( document.forms[0] ) {

      if (chipId == '6362' ) {
	      if ( radPmCPUSpeed[0].checked == true ) {
	         loc += 'PmCPUSpeed=256';
	      }
	      else if ( radPmCPUSpeed[1].checked == true ) {
	         loc += 'PmCPUSpeed=0';
	      }
	      else {
	         loc += 'PmCPUSpeed=256';
	      }
      }
      else {
	      if ( radPmCPUSpeed[0].checked == true ) {
	         loc += 'PmCPUSpeed=256';
	      }
	      else if ( radPmCPUSpeed[1].checked == true ) {
	         loc += 'PmCPUSpeed=8';
	      }
	      else if ( radPmCPUSpeed[2].checked == true ) {
	         loc += 'PmCPUSpeed=4';
	      }
	      else if ( radPmCPUSpeed[3].checked == true ) {
	         loc += 'PmCPUSpeed=2';
	      }
	      else if ( radPmCPUSpeed[4].checked == true ) {
	         loc += 'PmCPUSpeed=1';
	      }
	      else if ( radPmCPUSpeed[5].checked == true ) {
	         loc += 'PmCPUSpeed=0';
	      }
	      else {
	         loc += 'PmCPUSpeed=256';
	      }
	  }
      if ( chkPmCPUr4Kwait.checked == true )
        loc += '&PmCPUr4kWaitEn=1';
      else
        loc += '&PmCPUr4kWaitEn=0';

      if ( chkPmDRAMSelfRefresh.checked == true )
        loc += '&PmDRAMSelfRefreshEn=1';
      else
        loc += '&PmDRAMSelfRefreshEn=0';
   }

   loc += '&sessionKey=<%ejGetOther(sessionKey)%>';
   var code = 'location="' + loc + '"';
   eval(code);
}

// done hiding -->
</script>
</head>

<body onLoad='frmLoad()'>

      <blockquote>
         <form>

            <b>Power Management</b><br>
            <br>
            This page allows control of Hardware modules to evaluate power consumption. Use the control buttons to select the desired option, click Apply and check the status response. 
            <br>
            <br>

            <hr align=left width=95%><br>
            <b>MIPS CPU Clock</b>
            <br>
            <table border=0 cellspacing=1 cellpadding=1 >
              <tr>
                <td><input type='radio' name='radPmCPUSpeed' value=256>&nbsp;&nbsp;Auto&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <script language="javascript">
<!-- hide
                if (chipId != '6362' ) { 
	                document.writeln(" <td><input type='radio' name='radPmCPUSpeed' value=8>&nbsp;&nbsp;1/8 of full speed ASYNC&nbsp;&nbsp;&nbsp;&nbsp;</td>");
	                document.writeln(" <td><input type='radio' name='radPmCPUSpeed' value=4>&nbsp;&nbsp;1/4 of full speed ASYNC&nbsp;&nbsp;&nbsp;&nbsp;</td>");
	                document.writeln(" <td><input type='radio' name='radPmCPUSpeed' value=2>&nbsp;&nbsp;1/2 of full speed ASYNC&nbsp;&nbsp;&nbsp;&nbsp;</td>");
	                document.writeln(" <td><input type='radio' name='radPmCPUSpeed' value=1>&nbsp;&nbsp;Full speed ASYNC&nbsp;&nbsp;&nbsp;&nbsp;</td>");
                }
// done hiding -->
</script>
                <td><input type='radio' name='radPmCPUSpeed' value=0>&nbsp;&nbsp;Full speed SYNC&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td class='hd'>Status:</td>
                <td class='hd'>
                   <script language="javascript">
                   <!-- hide 
                   {   with ( document.forms[0] ) {
                         pmCPUSpeed   = '<%ejGet(pmCPUSpeed)%>';
                         switch (pmCPUSpeed) {
                           case '256':
	                           radPmCPUSpeed[0].checked = true;
	                           pmCPUr4Kwait = '<%ejGet(pmCPUr4kWaitEn)%>';
	                           if(pmCPUr4Kwait == 1) {
	                             document.writeln("<font color='green'> Auto</font>");
	                           }
	                           else {
	                             document.writeln("<font color='red'> Auto (Wait Disabled)</font>");
	                           }
	                           break;
                           case '8':
	                           radPmCPUSpeed[1].checked = true;
	                           document.writeln("<font color='red'> 1/8 of full speed ASYNC</font>");
	                           break;
                           case '4':
	                           radPmCPUSpeed[2].checked = true;
	                           document.writeln("<font color='red'> 1/4 of full speed ASYNC</font>");
	                           break;
                           case '2':
	                           radPmCPUSpeed[3].checked = true;
	                           document.writeln("<font color='red'> 1/2 of full speed ASYNC</font>");
	                           break;                       
                           case '1':
	                           radPmCPUSpeed[4].checked = true;
	                           document.writeln("<font color='green'> full speed ASYNC</font>");
	                           break;
                           case '0':
	                           if (chipId == '6362') {
	                              radPmCPUSpeed[1].checked = true;
	                           } 
	                           else {
	                              radPmCPUSpeed[5].checked = true;
	                           }
	                           document.writeln("<font color='green'> full speed SYNC</font>");
	                           break;
                           default:
                               document.writeln("<font color='red'>"+ pmCPUSpeed +" </font>");
                               break;
                        }
                       }
                   } 
                   // done hiding -->
                   </script>
                </td>
              </tr>
            </table>
            <br>

            <hr align=left width=95%><br>
            <b>Wait instruction when Idle</b>
            <br>
            <table border=0 cellspacing=1 cellpadding=1 >
              <tr>
                <td><input type='checkbox' name='chkPmCPUr4Kwait'> &nbsp;&nbsp;Enable&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td class='hd'>Status:</td>
                <td class='hd'>
                   <script language="javascript">
                   <!-- hide 
                     {
                       with ( document.forms[0] ) {
                         pmCPUr4Kwait = '<%ejGet(pmCPUr4kWaitEn)%>';
                         if(pmCPUr4Kwait == 1) {
                           document.writeln("<font color='green'>Enabled</font>");
                           chkPmCPUr4Kwait.checked = true;
                         }
                         else {
                           document.writeln("<font color='red'>Disabled</font>");
                           chkPmCPUr4Kwait.checked = false;
                         }
                       }
                     }
                   // done hiding -->
                   </script>
                </td>
              </tr>
            </table>
            <br>

            <hr align=left width=95%><br>
            <b>DRAM Self Refresh</b>
            <br>
            <table border=0 cellspacing=1 cellpadding=1 >
              <tr>
                <td><input type='checkbox' name='chkPmDRAMSelfRefresh'> &nbsp;&nbsp;Enable&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td class='hd'>Status:</td>
                <td class='hd'>
                   <script language="javascript">
                   <!-- hide 
                     {
                       with ( document.forms[0] ) {
                         pmDRAMSelfRefresh = '<%ejGet(pmDRAMSelfRefreshEn)%>';
                         if(pmDRAMSelfRefresh == 1) {
                           document.writeln("<font color='green'>Enabled</font>");
                           chkPmDRAMSelfRefresh.checked = true;
                         }
                         else {
                           document.writeln("<font color='red'>Disabled</font>");
                           chkPmDRAMSelfRefresh.checked = false;
                         }
                       }
                     }
                   // done hiding -->
                   </script>
                </td>
              </tr>
            </table>
            <br>

            <br>
            <center>
               <p align="center">
                  <input type='button' onClick='btnApply()' value='Apply'>
            </center>
         </form>
      </blockquote>


</body>
</html>


